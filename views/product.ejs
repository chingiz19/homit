<html ng-app="mainModule">

<head>
    <%- include('partial/imports')%>
        <%- include('partial/header', {title: title}); %>
            <link href="/resources/css/product.css" rel="stylesheet">
</head>

<body ng-cloak>
    <%- include('partial/checkout_menu')%>
        <div ng-controller="productController" layout="column">
            <div class="container">
                <input id="recommendedProducts" style="display: none;" value="<%= recommended_products %>">
                <input id="product" style="display: none;" value="<%= product %>">
                <input id="default_container" style="display: none;" value="<%= default_container %>">
                <div layout="column" itemscope itemtype="http://schema.org/Product">
                    <h1 style="text-align: center;">
                        <span itemprop="brand">
                            <%= product_name %>
                        </span>
                        <span itemprop="name">
                            <%= product_brand %>
                        </span> - One Click Away</h1>
                    <section>
                        <!--googleoff: snippet-->
                        <div class="col-md-6 product-img product-image" layout="column">
                            <img class="product-image-selected" ng-src="{{ container_info.image }}">
                            <div class="store-colosed-image" ng-if="!product.store_open">
                                <img ng-src="{{'/resources/images/non-catalog-image/homit_closed.png'}}">
                            </div>
                            <div class="product-image-line"></div>
                            <div layout="row">
                                <div ng-repeat="(key, value) in product.products">
                                    <img class="product-image-to-select" ng-style="((key == selected_container)) && {'border':'1px solid rgba(0,0,0,0.2)'}" ng-click="updateContainer(key)"
                                        ng-src="{{ value.image}}">
                                </div>
                            </div>
                        </div>
                        <!--googleon: snippet-->
                        <div class="col-md-6 product-property">
                            <% if (product_description) {%>
                                <section>
                                    <p itemprop="description">
                                        Description:
                                        <%= product_description %>
                                    </p>
                                </section>
                                <% } %>
                                    <section layout="column" class="section-box">
                                        <!--googleoff: snippet-->
                                        <div layout="row" class="size-section">
                                            <div class="size-buttons" layout="row">
                                                <button class="size-button-left" ng-click="volumeLeft(product.products[selected_container])">
                                                    <ng-md-icon icon="keyboard_arrow_left"></ng-md-icon>
                                                </button>
                                                <button class="size-button-right" ng-click="volumeRight(product.products[selected_container])">
                                                    <ng-md-icon icon="keyboard_arrow_right"></ng-md-icon>
                                                </button>
                                            </div>
                                            <ul layout="row">
                                                <li class="size-box-left text-verflow">
                                                    {{ product.products[selected_container].product_variants.all_volumes[product.products[selected_container].selectedVolume
                                                    - 1] }}
                                                </li>
                                                <li class="size-box-middle">
                                                    {{ product.products[selected_container].product_variants.all_volumes[product.products[selected_container].selectedVolume]
                                                    }}
                                                </li>
                                                <li class="size-box-right text-verflow">
                                                    {{ product.products[selected_container].product_variants.all_volumes[product.products[selected_container].selectedVolume
                                                    + 1] }}
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="size-section" layout="row">
                                            <div class="size-buttons" layout="row">
                                                <button class="size-button-left" ng-click="packLeft(product.products[selected_container])">
                                                    <ng-md-icon icon="keyboard_arrow_left"></ng-md-icon>
                                                </button>
                                                <button class="size-button-right" ng-click="packRight(product.products[selected_container])">
                                                    <ng-md-icon icon="keyboard_arrow_right"></ng-md-icon>
                                                </button>
                                            </div>
                                            <ul layout="row">
                                                <li class="size-box-left text-verflow">
                                                    {{ product.products[selected_container].product_variants[product.products[selected_container].product_variants.all_volumes[product.products[selected_container].selectedVolume]].all_packagings[product.products[selected_container].selectedPack
                                                    -1 ] + ' '}}
                                                </li>
                                                <li class="size-box-middle">
                                                    {{ product.products[selected_container].product_variants[product.products[selected_container].product_variants.all_volumes[product.products[selected_container].selectedVolume]].all_packagings[product.products[selected_container].selectedPack]
                                                    }}
                                                </li>
                                                <li class="size-box-right text-verflow">
                                                    {{ ' ' + product.products[selected_container].product_variants[product.products[selected_container].product_variants.all_volumes[product.products[selected_container].selectedVolume]].all_packagings[product.products[selected_container].selectedPack
                                                    + 1] }}
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="selected-product-price">C${{' ' + product.products[selected_container].product_variants[product.products[selected_container].product_variants.all_volumes[product.products[selected_container].selectedVolume]][product.products[selected_container].product_variants[product.products[selected_container].product_variants.all_volumes[product.products[selected_container].selectedVolume]].all_packagings[product.products[selected_container].selectedPack]].price
                                            }}
                                        </div>
                                        <button class="add-to-cart" ng-click="addToCart(product)">Add To Cart</button>
                                    </section>
                                    <div layout="column">
                                        <h3 class="product-details-header">Product Details</h3>
                                        <ul class="bullet-description">
                                            <li class="product-details-short">{{ product.products[selected_container].product_variants[product.products[selected_container].product_variants.all_volumes[product.products[selected_container].selectedVolume]].all_packagings[product.products[selected_container].selectedPack]
                                                }} x {{ product.products[selected_container].product_variants.all_volumes[product.products[selected_container].selectedVolume]
                                                }}
                                                <span class="product-details-container">{{ selected_container}}</span>
                                            </li>
                                            <!--googleon: snippet-->
                                            <!-- <% if (product_origin_country) {%> -->
                                                <li itemprop="description"><span class="bold">Type:</span>
                                                    <%= product_type %>
                                                </li>
                                                <li itemprop="description"><span class="bold">Country of Origin:</span>
                                                    <%= product_origin_country %>
                                                </li>
                                                <%if (product_made_by != "NULL") { %>
                                                    <li itemprop="description"><span class="bold">Made by:</span>
                                                        <%= product_made_by %>
                                                    </li>
                                                <% } %>
                                                <%if (showAlcoholVolume) { %>
                                                    <li itemprop="description"><span class="bold">Alcohol/Vol:</span>
                                                        <%= product_alcohol_volume %>
                                                    </li>
                                                <% } %>
                                                <li ng-click="hrefTo()">
                                                    <a href="<%= see_more_url %>">See More Products</a>
                                                </li>
                                            <!-- <% } %> -->
                                        </ul>
                                    </div>
                        </div>
                    </section>
                </div>
            </div>
            <div class="recomended-products">
                <!--googleoff: snippet-->
                <section layout="row" class="recomended-products-header">
                    <div class="recomended-products-header-line"></div>
                    <div class="recomended-products-header-text">People also Homit</div>
                </section>
                <section layout="row" class="recomended-item">
                    <div ng-repeat="item in recommended_products">
                        <ul ng-click="hrefTo(item.url)">
                            <li>
                                <img ng-src="{{item.image}}">
                            </li>
                            <li class="recomended-item-text">{{ item.packaging + " X " + item.size }}</li>
                            <li class="recomended-item-text">C${{ item.price }}</li>
                        </ul>
                    </div>
                </section>
                <section layout="row" class="recomended-products-footer">
                    <div class="recomended-products-header-line"></div>
                </section>
                <!--googleoff: snippet-->
            </div>
        </div>

        <% if (!production) { %>
            <script src="/resources/services/localStorage.js"></script>
            <script src="/resources/services/cartService.js"></script>
            <script src="/resources/controllers/product.js"></script>
            <% } %>
</body>

<footer>
    <%- include('partial/footer')%>
</footer>

</html>
<html ng-app="mainModule">

<head>
    <%- include('partial/imports')%>
        <%- include('partial/header', {title: title}); %>
            <link href="/resources/css/product.css" rel="stylesheet">
            <meta name="description" content="<%= meta_description %>" />
</head>

<body ng-cloak>

    <%- include('partial/checkout_menu')%>
        <div class="controller" ng-controller="productController" layout="column">
            <div class="product-content" itemscope itemtype="http://schema.org/Product">
                <input id="recommendedProducts" class="none" value="<%= recommended_products %>">
                <input id="product" class="none" value="<%= product %>">
                <input id="product-images" class="none" value="<%= product_images %>">
                <h2 class="product-name-h2-mob">
                    <span itemprop="name">
                        <%= product_brand %>
                    </span>
                    <span itemprop="brand">
                        <%= product_name %>
                    </span> - Deliver Now</h2>
                <div layout="column">
                    <section>
                        <!--googleoff: snippet-->
                        <div class="col-md-6 product-img product-image" layout="column">
                            <img class="product-image-selected" ng-src="{{ selectedImage }}">
                            <div class="store-colosed-image" ng-if="!product.store_open">
                                <img ng-src="{{'/resources/images/non-catalog-image/homit_closed.png'}}">
                            </div>
                            <div class="product-image-line"></div>
                            <div layout="row">
                                <div ng-repeat="image in productImages" class="product-img-list">
                                    <img class="product-image-to-select" ng-style="(image == selectedImage) && {'border':'1px solid rgba(0,0,0,0.1)', 'border-radius' : '4px'}"
                                        ng-click="selectImage(image)" ng-src="{{ image }}">
                                </div>
                            </div>
                        </div>
                        <!--googleon: snippet-->
                        <div class="col-md-6 product-property">
                            <h2 class="product-name-h2-web">
                                <span>
                                    <%= product_brand %>
                                </span>
                                <span>
                                    <%= product_name %>
                                </span> - Deliver Now</h2>
                            <%- product_image %>
                                <%- ingredients %>
                                    <section layout="column" class="section-box">
                                        <!--googleoff: snippet-->
                                        <div layout="row" class="size-section">
                                            <div class="size-buttons" layout="row">
                                                <button class="size-button-left" ng-click="volumeLeft(product)">
                                                    <ng-md-icon icon="keyboard_arrow_left"></ng-md-icon>
                                                </button>
                                                <button class="size-button-right" ng-click="volumeRight(product)">
                                                    <ng-md-icon icon="keyboard_arrow_right"></ng-md-icon>
                                                </button>
                                            </div>
                                            <ul layout="row">
                                                <li class="size-box-left text-verflow">
                                                    {{ product.product_variants.all_volumes[product.product_variants.selectedVolume - 1] }}
                                                </li>
                                                <li class="size-box-middle">
                                                    {{ product.product_variants.all_volumes[product.product_variants.selectedVolume] }}
                                                </li>
                                                <li class="size-box-right text-verflow">
                                                    {{ product.product_variants.all_volumes[product.product_variants.selectedVolume + 1] }}
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="size-section" layout="row">
                                            <div class="size-buttons" layout="row">
                                                <button class="size-button-left" ng-click="packLeft(product)">
                                                    <ng-md-icon icon="keyboard_arrow_left"></ng-md-icon>
                                                </button>
                                                <button class="size-button-right" ng-click="packRight(product)">
                                                    <ng-md-icon icon="keyboard_arrow_right"></ng-md-icon>
                                                </button>
                                            </div>
                                            <ul layout="row">
                                                <li class="size-box-left text-verflow">
                                                    {{ product.product_variants[product.product_variants.all_volumes[product.product_variants.selectedVolume]].all_packagings[product.product_variants.selectedPack - 1 ] + ' '}}
                                                </li>
                                                <li class="size-box-middle">
                                                    {{ product.product_variants[product.product_variants.all_volumes[product.product_variants.selectedVolume]].all_packagings[product.product_variants.selectedPack ] + ' '}}
                                                </li>
                                                <li class="size-box-right text-verflow">
                                                    {{ product.product_variants[product.product_variants.all_volumes[product.product_variants.selectedVolume]].all_packagings[product.product_variants.selectedPack + 1] + ' '}}
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="selected-product-price">C${{' ' + product.product_variants[product.product_variants.all_volumes[product.product_variants.selectedVolume]][product.product_variants[product.product_variants.all_volumes[product.product_variants.selectedVolume]].all_packagings[product.product_variants.selectedPack]].price }}
                                        </div>
                                        <button class="add-to-cart" ng-click="addToCart(product)">Add To Cart</button>
                                    </section>
                                    <div layout="column">
                                        <h3 class="product-details-header sub-header">Product Details</h3>
                                        <ul class="bullet-description">
                                            <li>
                                                <span class="bold">Product:</span> {{ product.product_variants[product.product_variants.all_volumes[product.product_variants.selectedVolume]].all_packagings[product.product_variants.selectedPack] }} x {{ product.product_variants.all_volumes[product.product_variants.selectedVolume] }}
                                                <span class="product-details-container">{{ product.product_variants.container }}</span>
                                            </li>
                                            <!--googleon: snippet-->
                                            <%- store_type_display_name %>
                                                <li>
                                                    <span class="bold">Location:</span>
                                                    <span itemprop="additionalProperty">Calgary, AB</span>
                                                </li>
                                                <%- product_type %>
                                                    <%- country_of_origin %>
                                                        <%- producer %>
                                                            <%- alcohol_content %>
                                                                <li>
                                                                    <a href="<%= see_more_url %>" target="_self" itemprop="isSimilarTo">See More Products</a>
                                                                </li>
                                        </ul>
                                    </div>
                        </div>
                    </section>
                </div>
                <%- preview %>
                    <%- serving_suggestions %>
                        <div class="recomended-products">
                            <!--googleoff: snippet-->
                            <section layout="row" class="recomended-products-header">
                                <div class="recomended-products-header-line"></div>
                                <div class="recomended-products-header-text">People also Homit</div>
                            </section>
                            <section class="recomended-item">
                                <div class="recomended-item-div">
                                    <div ng-repeat="item in recommended_products">
                                        <ul ng-click="hrefTo(item.url)">
                                            <li class="also-image-li">
                                                <img ng-src="{{item.image}}">
                                            </li>
                                            <li class="recomended-item-text">{{ item.packaging + " X " + item.size }}</li>
                                            <li class="recomended-item-text">C${{ item.price }}</li>
                                        </ul>
                                    </div>
                                </div>
                            </section>
                            <section layout="row" class="recomended-products-footer">
                                <div class="recomended-products-header-line"></div>
                            </section>
                            <!--googleoff: snippet-->
                        </div>
            </div>

        </div>

        <% if (!production) { %>
            <script src="/resources/services/localStorage.js"></script>
            <script src="/resources/services/cartService.js"></script>
            <script src="/resources/controllers/product.js"></script>
            <% } %>
</body>

<footer>
    <%- include('partial/footer')%>
</footer>

</html>
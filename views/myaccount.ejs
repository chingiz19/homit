<html ng-app="mainModule">
<head>
    <%- include('partial/imports')%>
    <%- include('partial/header', {title: title}); %>
</head>
<body ng-controller="myaccountController as myaccount" class="ng-cloak">
    <!-- main part -->
    <div class="container">
        <div class="col-md-4" style="margin-top: 10px;">
            <img height="200px" width="200px">
        </div>
        <div class="col-md-8" style="margin-top: 10px;">
            <div layout="row" layout-align="end center">
                <md-button class="md-raised"  ng-class="{'md-primary': myaccount.edit}" ng-click="myaccount.editButton();">{{myaccount.editButtonLabel}}</md-button>
            </div>

            <div layout="row" layout-align="space-between center">
                
                <!-- First name -->
                <md-input-container class="md-block" flex="45">
                    <label>First Name</label>
                    <input name="fname" type="text" ng-model="myaccount.user.first_name" ng-disabled="!myaccount.edit" ng-required="myaccount.edit"/>
                </md-input-container>

                <!-- Last name -->
                <md-input-container class="md-block" flex="45">
                    <label>Last Name</label>
                    <input name="lname" type="text" ng-model="myaccount.user.last_name" ng-disabled="!myaccount.edit" ng-required="myaccount.edit"/>
                </md-input-container>
            </div>

            <div layout="row" layout-align="space-between center">
                <!-- Email -->
                <md-input-container class="md-block" flex="100">
                    <label>Email</label>
                    <input name="email" type="email" ng-model="myaccount.user.email" ng-disabled="!myaccount.edit" ng-required="myaccount.edit"/>
                </md-input-container>
            </div>

            <div layout="row" layout-align="space-between center">
                <!-- Phone number -->
                <md-input-container class="md-block" flex="100">
                    <label>Phone</label>
                    <input name="phone" type="text" ng-model="myaccount.user.phone_number" ng-disabled="!myaccount.edit" ng-required="myaccount.edit"/>
                </md-input-container>
            </div>

            <div layout="row" layout-align="space-between">
                    <!-- Date of birth -->
                    <md-input-container flex="30">
                        <label>Day</label>
                        <md-select ng-model="myaccount.user.birth_day" ng-disabled="!myaccount.edit" ng-required="myaccount.edit">
                            <md-option ng-value="1">1</md-option>
                            <md-option ng-value="2">2</md-option>
                            <md-option ng-value="3">3</md-option>
                            <md-option ng-value="4">4</md-option>
                            <md-option ng-value="5">5</md-option>
                            <md-option ng-value="6">6</md-option>
                            <md-option ng-value="7">7</md-option>
                            <md-option ng-value="8">8</md-option>
                            <md-option ng-value="9">9</md-option>
                        </md-select>
                    </md-input-container>

                    <!--Date of birth -->
                    <md-input-container flex="30">
                        <label>Month</label>
                        <md-select ng-model="myaccount.user.birth_month" ng-disabled="!myaccount.edit" ng-required="myaccount.edit">
                            <md-option ng-value="1">January</md-option>
                            <md-option ng-value="2">February</md-option>
                            <md-option ng-value="3">March</md-option>
                            <md-option ng-value="4">April</md-option>
                        </md-select>
                    </md-input-container>

                    <!--Date of birth -->
                    <md-input-container flex="30">
                        <label>Year</label>
                        <md-select ng-model="myaccount.user.birth_year" ng-disabled="!myaccount.edit" ng-required="myaccount.edit">
                            <md-option ng-value="2014">2014</md-option>
                            <md-option ng-value="2015">2015</md-option>
                            <md-option ng-value="2016">2016</md-option>
                            <md-option ng-value="2017">2017</md-option>
                        </md-select>
                    </md-input-container>
                </div>

                <div layout="row" layout-align="center center">
                    <!-- Address bar -->
                    <a flex="10" href="#">Address 1</a> 
                    <span flex="10" class="text-center">|</span> 
                    <a flex="10" href="#">Address 2</a>
                    <span flex="10" class="text-center">|</span>  
                    <a flex="10" href="#">Address 3</a>
                </div>

                <div layout="row" layout-align="space-between center">
                    <!-- Address -->
                    <md-input-container class="md-block" flex="100">
                        <label>Address: [nickname]</label>
                        <input name="address" type="text" ng-model="myaccount.user.address" ng-disabled="!myaccount.edit" ng-required="myaccount.edit"/>
                    </md-input-container>
                </div>

                <div layout="column" layout-align="center">
                    <!-- Reset password -->
                    <md-button class="md-raised">Reset password</md-button>
                </div>

                <div layout="column" layout-align="center">
                    <!-- Update button -->
                    <md-button class="md-raised md-primary" ng-click="updateUserInfo()">Update</md-button>
                </div>
            </div>
        </div>

        <md-divider style="margin: 2em;"></md-divider>

        <div class="container">
            <div layout="row" layout-align="start center">
                <h3>Orders history</h3>
                <md-button class="md-fab md-mini md-primary" ng-click="myaccount.isOrderHistoryShown = !myaccount.isOrderHistoryShown">
                    <span class="glyphicon" ng-class="{'glyphicon-chevron-down': !myaccount.isOrderHistoryShown,
                                            'glyphicon-chevron-up': myaccount.isOrderHistoryShown}" 
                            aria-hidden="true">
                    </span>
                </md-button>
            </div>

            <div ng-if="myaccount.isOrderHistoryShown">
                <table class="table">
                    <thead>
                        <th>Order #</th>
                        <th>Delivery Address</th>
                        <th>Store Address </th>
                        <th>Price</th>
                        <th>Cart</th>
                    </thead>
                    <tbody>
                        <tr ng-repeat="order in myaccount.orders">
                            <td>{{order.id}}</td>
                            <td>{{order.delivery_address}}</td>
                            <td>{{order.store_address}}</td>
                            <td>{{order.price | currency:'C$':2}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    <script src="/resources/controllers/myaccount.js"></script>
</body>
</html>
